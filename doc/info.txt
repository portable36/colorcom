1. Identity & Auth Service

	â€¢	User login / registration
	â€¢	Multi-tenant support
	â€¢	Role-based access 
	â€¢	Token rotation & refresh
	â€¢	Social login (Google, Facebook)
	â€¢	Device/session tracking
	â€¢	Tenant resolution
	â€¢	Rate limiting
	â€¢	Auth validation
	â€¢	Request routing
	â€¢	Circuit breaking
	â€¢	Centralized auth
	â€¢	Fine-grained permissions

2. Vendor / Merchant Service (Multi-Vendor)

	â€¢	Vendor onboarding
	â€¢	Store settings
	â€¢	Commission rules
	â€¢	Payout configuration
	â€¢	Vendor analytics
	â€¢	Report (PDF)
	â€¢	Compliance checks
	â€¢	Store configuration
	â€¢	Seller performance metrics
	
3. Product Catalog Service

	â€¢	Products, variants, attributes
	â€¢	Categories & tags
	â€¢	SEO metadata
	â€¢	Bulk import/export
	â€¢	Search indexing
	â€¢	Images & videos
	â€¢	Category taxonomy

4. Inventory Service

	â€¢	Stock levels
	â€¢	Reservations (during checkout)
	â€¢	Low-stock alerts
	â€¢	Multi-warehouse support
	â€¢	create/delete/update warehouse
	â€¢	Event-driven sync
	â€¢	Stock tracking
	â€¢	Report (PDF)
	â€¢	Prevent overselling
	
5. Cart Service

	â€¢	Guest & user carts
	â€¢	Cart expiration
	â€¢	Coupon preview
	â€¢	Price recalculation

6. Order Service

	â€¢	Order creation
	â€¢	Order status (Pending, Paid, Shipped)
	â€¢	Order history
	â€¢	Invoice generation
	â€¢	Returns & refunds
	â€¢	Order lifecycle
	â€¢	Status tracking
	â€¢	Multi-vendor split orders
	â€¢	Report (PDF)
	
ğŸ” Sync (REST / gRPC)

Used for:

Reads

Validation

Example:

Order â†’ Inventory (Check stock)

ğŸ“© Async (Events)

Used for:

State changes

Scalability

Example:

OrderCreated â†’ Payment â†’ Inventory â†’ Shipping


Tools

Kafka / EventBridge / SNS/SQS

1. User places order
2. Order Service creates order (PENDING)
3. Event: OrderCreated
4. Payment Service charges
5. Event: PaymentSuccess
6. Inventory reserves stock
7. Fulfillment starts
8. Order becomes CONFIRMED
If payment fails â†’ compensation events rollback inventory

	
7. Payment Service

	â€¢	Payment intents
	â€¢	Webhook verification
	â€¢	bKash, SSLCommerz, Stripe, PayPal
	â€¢	Refund handling
	â€¢	Fraud checks
	â€¢	Payment intent
	â€¢	Webhook handling
	â€¢	Refunds
	â€¢	Gateway integration
	â€¢	Report (PDF)

8. Shipping / Logistics Service
 
	â€¢	Pathao / Steadfast integration
	â€¢	Tracking IDs
	â€¢	Delivery status updates
	â€¢	Courier rate calculation
	â€¢	Label generation
	â€¢	Courier integration
	â€¢	Shipping cost calculation
	â€¢	Tracking
	â€¢	Report (PDF)
	â€¢	Shipping rules
	â€¢	Warehouse selection
	
9. Accounting / Finance Service

	â€¢	Vendor payouts
	â€¢	Platform commissions
	â€¢	Ledger entries
	â€¢	Tax/VAT
	â€¢	Financial reports
	â€¢	Profit/Loss
	â€¢	Expance, product cost, merketing, delivery cost etc
	â€¢	Invoices
	â€¢	Report (PDF)

10. Review & Rating Service

	â€¢	Product reviews
	â€¢	Ratings
	â€¢	Moderation
	â€¢	Vendor ratings
	â€¢	Abuse prevention

11. Wishlist Service

	â€¢	Wishlist management
	â€¢	Stock notifications
	â€¢	Price-drop alerts
	â€¢	Save products
	â€¢	Personalized lists

12. Notification Service

	â€¢	Email
	â€¢	SMS
	â€¢	Push notifications
	â€¢	Order updates
	â€¢	OTP delivery


13. Search Service

	â€¢	Full-text search
	â€¢	Filters & sorting
	â€¢	Auto-suggest
	â€¢	Ranking & boosting
	â€¢	Keyword search
	â€¢	Filters
	â€¢	Ranking algorithms
	â€¢	Personalization signals

14. Analytics & Reporting Service

	â€¢	Sales reports
	â€¢	Funnel tracking
	â€¢	Vendor performance
	â€¢	Customer behavior
	â€¢	Accounting report
	â€¢	store, inventory report
	â€¢	Shipping report
	â€¢	All service report in PDF
	
15. AI / Recommendation Service (Modern)

	â€¢	Product recommendations
	â€¢	Related items
	â€¢	AI chatbot (customer support)
	â€¢	Demand prediction


16. Caching Layer
	â€¢	Redis
	â€¢	Object cache
	â€¢	Session cache
	â€¢	Product cache
	â€¢	HTTP cach
	
17. Event Bus

	â€¢	Order events
	â€¢	Payment events
	â€¢	Inventory sync
	â€¢	Email triggers


18. Observability Stack

	â€¢	Centralized logging 
	â€¢	Metrics (Prometheus)
	â€¢	Tracing 
	â€¢	Error tracking 


19. Security Must-Haves

 	â€¢	HTTPS/TLS everywhere
 	â€¢	Tenant data isolation
 	â€¢	Rate limiting
 	â€¢	API signing
 	â€¢	Webhook validation
 	â€¢	Encryption at rest
 	â€¢	Secrets manager
 	â€¢	Authentication
	â€¢	CORS
	â€¢	Request validation
	â€¢	gRPC â†” HTTP bridge
	â€¢	API tokens
	â€¢	mTLS (service-to-service)
	â€¢	WAF
	â€¢	Signed internal requests
	â€¢	Least privilege IAM
	â€¢	Webhook verification

20. Tenant Management Service

	â€¢	Create/manage tenants (shops)
	â€¢	Subscription & plan limits
	â€¢	Feature toggles
	â€¢	Domain mapping (shop.domain.com)

21. Pricing & Promotion Service

	â€¢	Discounts
	â€¢	Coupons
	â€¢	Flash sales
	â€¢	Dynamic pricing

22. Return & Refund Service

	â€¢	Return requests
	â€¢	Refund workflow
	â€¢	Dispute handling

23. Marketing & Analytics Service

	â€¢	Campaign tracking
	â€¢	Google Tag Manager
	â€¢	Facebook Pixel
	â€¢	Conversion analytics

24. AI Customer Support Service
	â€¢	Chatbot
	â€¢	Auto ticket routing

25. File / Media Service
	â€¢	Image & video storage
	â€¢	Image & video compression resize
	â€¢	CDN integration

ğŸ§© Optional but Enterprise-Level

	â€¢	Fraud Detection Service
	â€¢	Suspicious order detection
	â€¢	Risk scoring
	â€¢	Marketplace Settlement Service
	â€¢	Recommendation Engine
	â€¢	Data Warehouse / BI Service

ğŸ”‘ Golden Rule for Multi-Tenancy

	â€¢	Every service must: Accept tenant_id
	â€¢	Enforce tenant isolation
	â€¢	Emit tenant-aware events
	â€¢	Cache per tenant
	â€¢	Each service independently scalable
	â€¢	No shared databases
	â€¢	No direct DB access between services
	â€¢	Everything via APIs or events
	â€¢	Each service owns its database
	â€¢	No cross-service joins
	â€¢	Distributed tracing
	â€¢	tenant_id must come from: Gateway resolver, Never from client body
dempotency Service / Layer

This is non-negotiable for payments & orders.

Where:

Order creation

Payment webhooks

Inventory reservation

libs/common/idempotency/
â”œâ”€â”€ idempotency.service.ts
â”œâ”€â”€ idempotency.guard.ts
â””â”€â”€ idempotency.repository.ts

Use:

Idempotency-Key header

Redis / DB unique constraint


ğŸ› Storefront

Tech: Next.js + PWA
	â€¢	SSR for SEO
	â€¢	Offline support
	â€¢	Lightning-fast UI
	â€¢	Mobile-first

Reporting (PDF)
PDF generation should be async.
Request report
â†’ emit ReportRequested
â†’ background worker generates PDF
â†’ store in Media Service
â†’ notify user
Never generate PDFs in HTTP request threads.

Explicit Outbox Pattern
Add to each service DB:
outbox_events
- id
- aggregate_type
- aggregate_id
- event_type
- payload
- status
Then:

DB transaction â†’ write business data + outbox

Background worker â†’ publish to Kafka

This avoids â€œorder created but event lostâ€.


Monorepo Structure

ecommerce-platform/
â”œâ”€â”€ api-gateway/          # Kong / Edge Gateway
â”œâ”€â”€ microservices/            # All deployable applications
â”‚   â”œâ”€â”€ auth-service/         # IAM
â”‚   â”œâ”€â”€ tenant-service/       # Tenant & subscription
â”‚   â”œâ”€â”€ product-service/
â”‚   â”œâ”€â”€ search-service/
â”‚   â”œâ”€â”€ cart-service/
â”‚   â”œâ”€â”€ order-service/
â”‚   â”œâ”€â”€ inventory-service/
â”‚   â”œâ”€â”€ payment-service/
â”‚   â”œâ”€â”€ shipping-service/
â”‚   â”œâ”€â”€ review-service/
â”‚   â”œâ”€â”€ notification-service/
â”‚   â”œâ”€â”€ cms-service/
â”‚   â”œâ”€â”€ ai-service/
â”‚   â””â”€â”€ web-frontend/         # Next.js PWA (BFF)
â”‚
â”œâ”€â”€ libs/                     # Shared but versioned libraries
â”‚   â”œâ”€â”€ common/               # Logger, exceptions, utils
â”‚   â”œâ”€â”€ auth/                 # JWT, guards, decorators
â”‚   â”œâ”€â”€ tenant/               # Tenant context resolver
â”‚   â”œâ”€â”€ database/             # DB base adapters
â”‚   â”œâ”€â”€ messaging/            # Kafka/RabbitMQ wrapper
â”‚   â”œâ”€â”€ observability/        # Tracing, metrics
â”‚   â””â”€â”€ contracts/            # Events & DTOs (no logic)
â”‚
â”œâ”€â”€ infra/                    # Infrastructure as code
â”‚   â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ kubernetes/
â”‚   â”œâ”€â”€ terraform/
â”‚   â”œâ”€â”€ kong/
â”‚   â””â”€â”€ monitoring/
â”‚
â”œâ”€â”€ scripts/                  # Dev & CI scripts
â”œâ”€â”€ docs/                     # Architecture & ADRs
â”œâ”€â”€ .github/                  # CI/CD pipelines
â”œâ”€â”€ package.json
â””â”€â”€ nx.json                  # Monorepo tool


order-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts               # Bootstrap
â”‚   â”œâ”€â”€ app.module.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/              # Feature-first design
â”‚   â”‚   â”œâ”€â”€ order/
â”‚   â”‚   â”‚   â”œâ”€â”€ order.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ order.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ order.repository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ order.entity.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ order.mapper.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ order.events.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ order.saga.ts        # Compensation logic
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â””â”€â”€ tests/
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ order-item/
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/       # External dependencies
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ postgres.config.ts
â”‚   â”‚   â”‚   â””â”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚   â”œâ”€â”€ kafka.producer.ts
â”‚   â”‚   â”‚   â””â”€â”€ kafka.consumer.ts
â”‚   â”‚   â”œâ”€â”€ cache/
â”‚   â”‚   â”‚   â””â”€â”€ redis.client.ts
â”‚   â”‚   â””â”€â”€ http/
â”‚   â”‚       â””â”€â”€ payment.client.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ filters/
â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚   â”‚   â”œâ”€â”€ pipes/
â”‚   â”‚   â””â”€â”€ constants/
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ app.config.ts
â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â””â”€â”€ kafka.config.ts
â”‚   â”‚
â”‚   â””â”€â”€ health/
â”‚       â””â”€â”€ health.controller.ts
â”‚
â”œâ”€â”€ test/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ .env.example
â””â”€â”€ README.md


Shared Libraries

libs/common
common/
â”œâ”€â”€ logger/
â”œâ”€â”€ exceptions/
â”œâ”€â”€ response/
â”œâ”€â”€ utils/
â””â”€â”€ base-entity.ts

libs/auth

auth/
â”œâ”€â”€ jwt/
â”œâ”€â”€ guards/
â”œâ”€â”€ decorators/
â””â”€â”€ rbac/

libs/tenant

tenant/
â”œâ”€â”€ tenant-context.ts
â”œâ”€â”€ tenant.middleware.ts
â”œâ”€â”€ tenant.guard.ts
â””â”€â”€ tenant.resolver.ts

Messaging Contracts

contracts/
â”œâ”€â”€ events/
â”‚   â”œâ”€â”€ order/
â”‚   â”‚   â”œâ”€â”€ order-created.v1.ts
â”‚   â”‚   â”œâ”€â”€ order-paid.v1.ts
â”‚   â”‚   â””â”€â”€ order-cancelled.v1.ts
â”‚   â”œâ”€â”€ payment/
â”‚   â””â”€â”€ inventory/
â”‚
â””â”€â”€ commands/

API Gateway

infra/kong/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ auth.yaml
â”‚   â”œâ”€â”€ order.yaml
â”‚   â””â”€â”€ product.yaml
â”œâ”€â”€ routes/
â”œâ”€â”€ plugins/
â”‚   â”œâ”€â”€ tenant-resolver
â”‚   â”œâ”€â”€ rate-limit
â”‚   â””â”€â”€ jwt-auth
â””â”€â”€ kong.yml

Frontend (Next.js BFF Pattern)

web-frontend/
â”œâ”€â”€ app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ bff/
â”‚   â”‚   â”œâ”€â”€ order.api.ts
â”‚   â”‚   â”œâ”€â”€ product.api.ts
â”‚   â”‚   â””â”€â”€ cart.api.ts
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ stores/
â”‚   â””â”€â”€ utils/
â””â”€â”€ middleware.ts   # Tenant/domain resolver


